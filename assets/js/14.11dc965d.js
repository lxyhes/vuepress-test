(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{539:function(_,v,t){"use strict";t.r(v);var r=t(5),s=Object(r.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h2",{attrs:{id:"_1、自我介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、自我介绍"}},[_._v("#")]),_._v(" 1、自我介绍")]),_._v(" "),t("p",[_._v("我今年26，渣本学历，大学里最遗憾的事情就是没有好好学习一下计算机的基础知识，想起来都是泪啊。不过还好，我大学喜欢上了辩论演讲，当时是系辩论队的核心辩手兼职系辩论队教练，校辩论队组建后，也成为了校辩论队教练。")]),_._v(" "),t("p",[_._v("所以和大家传统印象中的程序猿不同，我的话特别多，想东西也想的很多，脑子里经常会有两个小人打架。以前也比较喜欢玩游戏，经常和朋友在祖安开黑，真要说起来，祖安文科状元我还是可以争一争的。")]),_._v(" "),t("p",[_._v("大学虽然没有好好学习基础知识，好在辩论让我积累了一些优势。在分析思考问题，表达能力上，我就是程序猿群里中的猴王，72变，信手拈来。")]),_._v(" "),t("p",[_._v("言归正传，虽然思维和表达不错，当时技术功底的确一般。所以当时技术要求稍微高一点儿的公司，我面一家败一家，最后才找到了一家做电力系统相关的传统行业公司。")]),_._v(" "),t("p",[_._v("最开始干的津津有味，觉得复杂sql，存储过程，几千行的大方法，写出来真是太牛逼了。")]),_._v(" "),t("p",[_._v("后来学到了一个名词——屎一样的代码，这工作就开始不香了。而我一直在这个环境下提升自己crud的能力。所以沾染的代码风格，大家懂的……")]),_._v(" "),t("p",[_._v("工作上，公司每年有调薪，我优秀的表达能力，思维能力让我在另外一个猴群体成了小猴王（毕业1年经验就成了项目经理），因此我在涨薪和晋升上很迅速，跟吃了仙丹一样如有神助。")]),_._v(" "),t("p",[_._v("后来嘛，就遇到了如来佛——甲方。从此暗无天日，我再怎么七十二变，架不住甲方给钱是爸爸啊。甲方比如来还能，如来好歹告诉你啥能干，你干了不该干的，我不让你动，甲方不一样啊，甲方直接说，反正我也不懂，但我就要一个五彩斑斓的黑，你看着给搞搞。")]),_._v(" "),t("p",[_._v("这些经历，让我萌生了一定要跳出这个地方的想法。于是我开始疯狂找课。一年半前，我入手了某课网的架构课，学了大半年，完全看不到进步。课程讲的都是api调用，讲师水平一言难尽……")]),_._v(" "),t("p",[_._v("后来机缘巧合，有个朋友学了面试突击三件套跳槽，经他推荐，我买了第一份。接下来的几个月，jvm，mysql，rocketmq，亿级流量……感觉就是悟空进了蟠桃园……太香了。")]),_._v(" "),t("p",[_._v("后来，当我看到架构课的时候，我就知道我命中那支定海神针出现了……得到它以后，我一发不可收拾，每日把玩，潜心钻研大半年，这支定海神针终于成了我的如意金箍棒。")]),_._v(" "),t("p",[_._v("在学习期间，发生过蛮多事儿的，甲方提了很多莫名其妙的需求，业务技术都说不通，时间时间也不给，没事儿再飞几口锅过来让我背着，这种小可爱，我是忍不了的。")]),_._v(" "),t("p",[_._v("于是从20年12月份儿我开始奋发图强，牟足了劲学习，21年4月底开始面试，面试前还是很忐忑的，毕竟学历，工作经历都一般，但是没想到面试出奇的顺利，任你面试官手段通天，翻江倒海，我依然稳如老猴，见招拆招。历经一个月的降妖除魔，终于修得正果……不得不说，金箍棒是真的太顶了。")]),_._v(" "),t("h2",{attrs:{id:"_2、我面试了哪些公司"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、我面试了哪些公司"}},[_._v("#")]),_._v(" 2、我面试了哪些公司")]),_._v(" "),t("p",[_._v("北银金科--北京银行下属公司  (2轮技术+1轮Hr，通过发了offer)\n去哪儿网    (3轮技术+1轮Hr，通过)\n滴滴      (1轮技术，因为已经拿到满意offer，又不想去北京，就推掉了后续面试)\n通达易       (2轮技术，通过)\nMobTech       (2轮技术+1轮总裁+1轮hr，通过发了offer)\n喜马拉雅    (1轮技术，因为一面体验很差，后面有了意向公司之后就直接推掉了二面)\n微盟      (2轮技术，不通过，2轮技术考了sql，算法，并发编程场景，除了并发其他的都答的不好，最终挂了)\n达达-京东到家      (3轮技术+1轮Hr，通过，发了offer)\n叮咚买菜      (3轮技术+1轮Hr，通过)\n上海的几家小公司，都过了。")]),_._v(" "),t("h2",{attrs:{id:"_3、-面试准备内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、-面试准备内容"}},[_._v("#")]),_._v(" 3、 面试准备内容")]),_._v(" "),t("p",[_._v("最开始，我的想法是，好好学习架构课，把现公司的屎山锤炼一下，锤不成五指山，好歹锤成个小黄山。")]),_._v(" "),t("p",[_._v("理想很丰满，现实却是“开发时间+业务背景+甲方”的紧箍咒让我头疼欲裂。空有一身本事却无施展拳脚之地，真叫人难受。")]),_._v(" "),t("p",[_._v("也就是从这个时候开始，我决定还是开始自己的西行之路。电视剧里的猴子，摘不掉紧箍咒，而我不一样，我是猴，我能摘！于是我跟老师说明自己的情况，老师听后只说了一句话：那跳吧！")]),_._v(" "),t("p",[_._v("接下来就是，老师和助教制定计划，我每天按照计划一步一步往前推进学习进度。基本上按照早上6点到8点半，晚上7点-11点的时间疯狂补充知识。")]),_._v(" "),t("p",[_._v("jvm + mysql + mq +亿级流量+架构课，一套组合拳下来，没过多久，我的笔记，流程图，脑图，总结堆的越来越厚实")]),_._v(" "),t("p",[_._v("我是个比较喜欢炫耀的人，看着不断变厚实的笔记和资料，也忍不住开始在群，某课网架构群，各种学习群里面，专挑问题回答，回答不上来我就去看，去找，没过多久，我发现各种基础的面试题，已经难不倒我了。")]),_._v(" "),t("p",[_._v("我甚至还能举个例子，说个场景，聊聊我为啥这么理解，聊聊为啥这么设计。这段时间，连我自己都没发现，原来我已经实现了跨越式进步。")]),_._v(" "),t("p",[_._v("后来在跟助教聊天的时候，某强说了一句话：你现在已经非常强大了。某霸王也说了一句话：一步一步看着你长大，还有其他班里的一些小伙伴，他们最喜欢说的就是，你的理解已经达到这个地步了吗？……这个时候我才意识到，我真的已经成长了很多很多。")]),_._v(" "),t("p",[_._v("就我个人而言，学习知识，掌握速度最快的方法，就是输出。所谓百炼成钢，就是如此，，架构课，那么那么多的知识，靠刷是不够的，最重要的就是要思考，要输出，要讨论，要尝试去解决问题。说几个例子：")]),_._v(" "),t("p",[_._v("（1）我在一些群里面，输出过eureka，ribbon，hystrix的优化思路。\nEureka的各个核心逻辑的参数是怎么样的？ribbon的各种负载均衡规则的适用场景？在各种场景下又是如何结合eureka，feign，hystrix做参数优化？")]),_._v(" "),t("p",[t("a",{attrs:{href:"https://www.yuque.com/docs/share/c9e77351-ebb8-4a3c-b6f1-cc4fc37ea1c9",target:"_blank",rel:"noopener noreferrer"}},[_._v("https://www.yuque.com/docs/share/c9e77351-ebb8-4a3c-b6f1-cc4fc37ea1c9"),t("OutboundLink")],1)]),_._v(" "),t("p",[_._v("（2）我整理了一张hystrix的流程图")]),_._v(" "),t("p",[_._v("Hystrix究竟是怎么执行的，整合了feign之后，他又是如何处理动态代理对象的？创建完成之后又是怎么结合线程池提交任务的？")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://lxyhes.github.io/tuchuang_test/image-20210623160937355.png",alt:""}})]),_._v(" "),t("p",[_._v("（3）在各种技术群里面，见到问题就回答，见到问题就回答。")]),_._v(" "),t("p",[_._v("因为回答的太多，我也没有刻意取留截图，附上一些之前的截图吧。")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://lxyhes.github.io/tuchuang_test/image-20210623160921429.png",alt:""}})]),_._v(" "),t("p",[t("img",{attrs:{src:"https://lxyhes.github.io/tuchuang_test/image-20210623160913703.png",alt:""}})]),_._v(" "),t("p",[t("img",{attrs:{src:"https://lxyhes.github.io/tuchuang_test/image-20210623160902343.png",alt:""}})]),_._v(" "),t("p",[_._v("除了上面这个，我在群里面，也经常参与问题的讨论，回答。")]),_._v(" "),t("p",[_._v("（4）结合公司的业务进行深度思考。\n比如，我要是用了MQ要怎么用？我们的项目有没有秒杀场景？和老师架构讲的秒杀是不是相似？不相似的话，区别在哪里，这个区别需不需要我在架构上做调整？")]),_._v(" "),t("p",[_._v("Jvm优化思路是不是相似？缓存数据要怎么存，每一级存什么，大概多少key，如何设置过期策略，本地缓存怎么存，存什么合适，多大合适，怎么和redis保持一致，怎么和数据库保持一致，如果不一致了会有什么影响，怎么解决不一致问题，缓存同步怎么保证时效性，怎么监控？")]),_._v(" "),t("p",[_._v("CDN用上是不是合适，可不可以不用？Tomcat怎么优化，我们的机器配置和请求访问特点，和普通的电商是不是类似，如何根据业务的具体情况来做分析，来做Tomcat参数调优？")]),_._v(" "),t("p",[_._v("我的学习方法：\n"),t("strong",[_._v("简单粗暴，就是学习+笔记+画图+头脑风暴输出+讨论输出。")])]),_._v(" "),t("p",[t("strong",[_._v("主要复习的内容")]),_._v("：")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("专栏课内容+架构课内容+公司的项目")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("专栏课：JVM专栏课+MYSQL专栏课+ROCKETMQ专栏课")])]),_._v(" "),t("li",[t("p",[_._v("架构课：大电商的设计模式+ spring cloud 源码+分布式事务解决方案/源码+分布式锁解决方案/源码+JDK源码")])])])])]),_._v(" "),t("p",[_._v("很多人喜欢问学习进度，我其实想说，进度不重要，重要的是，**你学到的有没有输出？有没有输出？有没有输出？**重要的事情说三遍。")]),_._v(" "),t("p",[_._v("就算你拿到了定海神针，拿在手里不输出，你自己也不知道挥不挥的动，挥动了，能不能打到妖怪，打到了妖怪能不能一击必杀，灭了他的三魂七魄？")]),_._v(" "),t("p",[_._v("我们要思考的从来不是架构班更新到哪里了，专栏又出了多少个了，哪个大佬一天刷了十几章专栏了等等这些没有意义的问题")]),_._v(" "),t("p",[_._v("我们要思考的是，我学完了jvm专栏，"),t("strong",[_._v("现在能够在输出多少，疑问是否解决，公司需要优化参数，我能不能上手做，出现了问题，我能不能根据学到的知识把他解决，这个才是学习过程中最该关注的问题")]),_._v("。")]),_._v(" "),t("p",[_._v("用我打辩论的思维，当我们看了十篇论文的时候，我们会觉得自己的知识面宽如大海，但是对手攻击的角度，似乎也宽如大海，哪里都可能是被进攻的角度，哪里都是破绽。")]),_._v(" "),t("p",[_._v("而只有当我和队友沉下心来，把我看到学到的东西和队友来一场"),t("strong",[_._v("激烈的头脑风暴+口头碰撞")]),_._v("的之后，才能输出一套牢不可破的逻辑。")]),_._v(" "),t("h2",{attrs:{id:"_4、-简历准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、-简历准备"}},[_._v("#")]),_._v(" 4、 简历准备")]),_._v(" "),t("p",[_._v("说实话，经过了大量的知识输入，再加上几个月时间的总结+思考+笔记+讨论输出之后，你的简历简直是手到擒来，无非是需要关注一些模板和格式。")]),_._v(" "),t("p",[t("strong",[_._v("我的简历的结构是这样的：")])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("（1）技术点")]),_._v("，从八股文到框架，由基础到深入的过程去写。比如，深入阅读JDK集合并发源码，jvm，mysql，框架源码等；")])]),_._v(" "),t("p",[_._v("​           在简历上的体现类似于下列格式：\n​        深入阅读JDK集合源码，JUC并发包源码，深入理解volatile原理，synchronized锁原理。")]),_._v(" "),t("ul",[t("li",[t("p",[t("strong",[_._v("（2）项目点")]),_._v("，项目是我这次简历以及面试准备的重中之重，")]),_._v(" "),t("p",[_._v("设计模式怎么用的，spring cloud怎么用的，我是怎么通过源码结合业务来思考拆分微服务的，怎么做优化的？")])])]),_._v(" "),t("p",[_._v("​       分布式事务怎么用的，我是怎么通过阅读解决分布式事务问题的？")]),_._v(" "),t("p",[_._v("​       我是怎么用分布式锁的？")]),_._v(" "),t("p",[_._v("​       用的过程中出现了什么问题，我是如何通过思考源码，原理，执行过程来解决的？")]),_._v(" "),t("p",[t("strong",[_._v("在简历上的体现，就可以类似于下面的格式：")])]),_._v(" "),t("ul",[t("li",[t("p",[t("strong",[_._v("技术挑战")]),_._v("：spring cloud服务注册、发现时效性问题、资源分配问题")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("解决方案")]),_._v("：通过深入阅读源码，了解各个参数的生效方式，并结合线上监控的服务注册、发现、心跳的时效性，服务器的压力，不同业务的qps，请求响应情况，优化各项参数配置。")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("实现效果")]),_._v("：通过对参数调整，实现了在xxx业务场景下，时效性为秒级，并且实现了冷热资源隔离，实现热业务和冷业务资源配置的优化。")])])]),_._v(" "),t("h2",{attrs:{id:"_5、技术亮点准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、技术亮点准备"}},[_._v("#")]),_._v(" 5、技术亮点准备")]),_._v(" "),t("p",[t("strong",[_._v("我准备了主要是两个点：")])]),_._v(" "),t("ul",[t("li",[_._v("（1）"),t("strong",[_._v("基于业务领域做了微服务拆分，并引入了分布式事务，分布式锁")]),_._v("；")])]),_._v(" "),t("p",[_._v("​     这些内容能够有多细节，就有多细节，比如说，分布式事务，具体在哪个业务上用的？是出于什么考虑要用，时效性？强一致性？能不能有其他的替代方案？")]),_._v(" "),t("p",[_._v("如果出了问题，有没有兜底方案？每天的业务量多少？这个业务量下，你这个分布式事务能不能扛下来这个流量？如果业务量飞快提升，你这个技术方案怎么扩展？")]),_._v(" "),t("ul",[t("li",[_._v("（2）"),t("strong",[_._v("三级缓存架构")]),_._v("；\n我自己总结了一些东西，包括笔记和图，附上链接："),t("a",{attrs:{href:"https://www.processon.com/view/link/60aa22936376891bafa845dd",target:"_blank",rel:"noopener noreferrer"}},[_._v("https://www.processon.com/view/link/60aa22936376891bafa845dd"),t("OutboundLink")],1)])]),_._v(" "),t("h2",{attrs:{id:"_6、-面试内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6、-面试内容"}},[_._v("#")]),_._v(" 6、 面试内容")]),_._v(" "),t("p",[_._v("因为前面的很多师兄已经分享了大量的基础知识面试题，我这次就着重附上我遇到的几个场景题和项目细节题，大家可以感受以下。")]),_._v(" "),t("p",[t("strong",[_._v("1、三级缓存，你具体是怎么存的数据？这么一套架构解决了什么问题？你是怎么做的同步？同步的时效性多少？怎么监控的？redis的key有多少？命中率多少？没有命中的是什么原因？怎么查的，思路是什么？")])]),_._v(" "),t("p",[_._v("你服务本地jvm存的什么数据？数据量有多大？怎么保证多台服务一致的？怎么保证和数据库、redis一致的？如果发生了数据改变，你是怎么保证他们是一致的？同步时效性是多少，这个过程中大量流量进来的话，你是怎么处理的？这些问题，大家可以结合自己的业务系统，去思考，假如要这么设计一套缓存架构，这些问题，如何去解决")]),_._v(" "),t("p",[_._v("还记得我个人认为最重要的事情吗？知识学完，有没有输出？有没有输出？有没有输出？也请大家尽情输出！")]),_._v(" "),t("p",[_._v("我是怎么思考回答的？\n事实上，三级缓存这个问题，最重要的是事"),t("strong",[_._v("先做思考")]),_._v("。")]),_._v(" "),t("p",[_._v("你的项目里，哪些数据是适合做静态缓存的？比如我们的系统，有一个分解曲线数据，也有一个分解后的详情数据，这个数据在查询的时候是一定需要加载的，但是却不会出现变化。所以这样的数据就适合做第一级缓存，渲染成静态页面来存放在nginx层。挡下第一层流量。")]),_._v(" "),t("p",[_._v("第二级缓存，说白了，也是需要频繁查询的数据，但是这个数据是存在有效期，存在被修改，存在需要统计的情况的。")]),_._v(" "),t("p",[_._v("比如我的系统里面，电量套餐数据，挂牌电量数据，所有的用户是需要访问电量套餐数据，签订套餐，并且扣减套餐的剩余电量的，既然是套餐，那么电量数据频繁修改，电价有可能也是会被各个发起方修改的。所以这类型的数据需要用redis缓存，访问速度快，即使修改频繁redis也比db快。")]),_._v(" "),t("p",[t("strong",[_._v("JVM本地缓存")]),_._v("，在本地缓存这一层，很多人是有点不知道要存什么数据的。这个其实也要根据自己的业务场景去思考。我这边自己的思路是：")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("第一：JVM缓存需要存的是热点数据，到达服务就可以直接返回，那么我这边存的数据就是，我对昨日的热点挂牌数据的订单（排名1000的），以及热点电量套餐（排名1000的）来做本地热点数据缓存。")])]),_._v(" "),t("li",[t("p",[_._v("第二：JVM缓存需要存的是所有服务需要的共享数据，并且数据量不大，修改不频繁的。这种数据放在JVM层，就不需要再走一遍redis缓存，比如说，用户的一些基础资料信息。")])]),_._v(" "),t("li",[t("p",[_._v("第三：JVM缓存需要存的是降级数据，也就是说，一旦服务出现了大量调用失败的请求，那么一些请求就需要降级处理，防止用户体验出现崩盘的情况。比如说，配和fallback降级使用的数据，只给一些简单的查询结果，或者干脆直接返回一个，系统开小差了，请稍后再试，做到快速返回。")])])]),_._v(" "),t("p",[t("strong",[_._v("2、假如我要你设计一个最终一致性的分布式事务方案，你会怎么设计？需要考虑哪些方面的内容？（架构班讲过，那么我们怎么结合自己的思考和语言把它输出出来，最好结合业务输出）")])]),_._v(" "),t("p",[_._v("我这里给出一个思路：\n首先，如果要考虑分布式事务，一定要考虑是要"),t("strong",[_._v("牺牲吞吐量还是牺牲强一致性")]),_._v("。那么结合业务来思考，比如我这边，签订套餐操作，挂牌电量交易操作，现货电量实时交易操作，交易额度锁定，结算额度锁定，结算数据推送，风险额度锁定，调度负荷锁定，调度指令发送等等一系列的操作是需要放在同一个分布式事务的。")]),_._v(" "),t("p",[_._v("但是有些是需要强一致的，比如交易操作与交易额度扣减操作，这个必须要做到强一致，那么他们就要放在同一个分布式事务中，使用TCC，由于我们的系统的这些操作的tps并不是很高，所以可以使用TCC。")]),_._v(" "),t("p",[_._v("后续的结算额度，风险额度，调度负荷锁定，调度指令等操作，实际上不需要强一致，那么就可以考虑最终一致性，比如使用MQ来搞定。到底是选择可靠消息投递方案，还是直接RocketMQ的事务消息机制来做，都可以。")]),_._v(" "),t("p",[_._v("但是分布式事务的场景，一定一定会有性能瓶颈，要想彻底解决性能问题的话，需要采取彻底最终一直性，并且不能用事务消息这种方式，要使用MQ普通的异步消息 + redis扣减 + 对账补偿服务的方式。")]),_._v(" "),t("p",[t("strong",[_._v("3、我现在需要设计一个类似于优惠券的系统。要求是：")])]),_._v(" "),t("ul",[t("li",[t("p",[_._v("1）实时性，达到分钟级秒级；")])]),_._v(" "),t("li",[t("p",[_._v("2）各种优惠券优惠规则可配置，获得优惠券的达成条件可配置；")])]),_._v(" "),t("li",[t("p",[_._v("3）需要保证不能有发失败的情况")])])]),_._v(" "),t("p",[_._v("你会怎么去设计？")]),_._v(" "),t("p",[_._v("我当时的思路和说法：")]),_._v(" "),t("p",[t("strong",[_._v("首先要做到动态可配置，需要对业务进行分离。")])]),_._v(" "),t("ul",[t("li",[t("p",[_._v("（1）核心交易业务。")])]),_._v(" "),t("li",[t("p",[_._v("（2）订单状态业务。")])]),_._v(" "),t("li",[t("p",[_._v("（3）优惠条件业务。")])]),_._v(" "),t("li",[t("p",[_._v("（4）优惠券触发业务。")])])]),_._v(" "),t("p",[_._v("前面两个一般比较固定，大多数涉及到交易的公司都有很完善的方案，我就不赘述了。")]),_._v(" "),t("p",[_._v("那么优惠条件业务，我会设计这么几个维度。")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("维度1：时间，可配置规则为小时范围，日范围；")])]),_._v(" "),t("li",[t("p",[_._v("维度2：积分等级，可配置积分登记分段，以及积分分段的分数；")])]),_._v(" "),t("li",[t("p",[_._v("维度3：单笔金额维度，可与时间积分获得组合使用，配置单笔金额下限，以及单笔金额某个范围内对应的积分；")])])]),_._v(" "),t("p",[_._v("根据以上三个维度，基本上可以实现动态配置优惠券的触发规则，比如7天完成了3笔金额超过30元的订单。比如积分达到了xx分。比如单笔订单达到了50元，会触发返现。")]),_._v(" "),t("p",[t("strong",[_._v("4、我现在需要用redis实现一个限流器，要求是1分钟之内只能由10个请求通过，你会怎么设计？")]),_._v("\n我当时其实是有点懵的。由于没有刷面试题，所以只是知道有令牌桶算法，不知道令牌桶算法的具体实现。所以，我思考了一下，用redis的话，完全可以参照redisson的信号量锁来实现。")]),_._v(" "),t("p",[_._v("简单来说就是，请求过来以后，先去redis尝试创建一个限流器，然后内部有一个计数器，")]),_._v(" "),t("p",[_._v("判断是否小于10，如果小于10，就执行incr，")]),_._v(" "),t("p",[_._v("如果大于10，请求要么等待，要么直接返回。这个限流器key的超时时间设置为1分钟。")]),_._v(" "),t("p",[_._v("这个时候实际上就体现了老师所说的，读源码的重要性，"),t("strong",[_._v("很多方案的实现思路都是有相似之处")]),_._v("的，完全可以"),t("strong",[_._v("思考之后参照着来")]),_._v("，当然，如果没有好好学习，深入思")]),_._v(" "),t("p",[_._v("考，输出笔记，头脑风暴一下，即使读了源码，也是要直接挂的")]),_._v(" "),t("p",[_._v("所以还是那句话，是骡子是马拉出来溜溜，金箍棒你摸的再光滑，不挥动两下，也是不知道它到底是不是真听你话的。")]),_._v(" "),t("p",[t("strong",[_._v("5、我有这么一个场景，有一个客户下了一个订单，我怎么才能匹配到直径500米范围内的所有骑手？如果我要从中选择一个骑手去接单，应该怎么去设计")]),_._v("？")]),_._v(" "),t("p",[_._v("这道题，有些人的第一反应是redis geo的数据结构。由于我不喜欢刷面试题，并不知道geo是个什么东西，所以，我就结合我之前刷过的算法题，说了一下我的实现思路，思路如下：")]),_._v(" "),t("p",[_._v("当时思考了一会儿。说，首先针对地域画一个网格。因为我肯定不能直接拿所有骑手的位置坐标，做数据样本去和订单位置比对。")]),_._v(" "),t("p",[_._v("所以第一步，就是去缩小区域。画出的网格维度可以自己根据负载，内存，响应来综合确定（因为网格大小是会影响数据量响应速度的，比如网格过大，那么需要找的骑手就会过多，网格过小，网格数据量会变大，并且找到骑手的概率会变小，可能会有重新查找的开销），找一个性能最好的。")]),_._v(" "),t("p",[_._v("然后找到订单所在的网格。找到网格内的所有骑手，再去比对位置。假如没有在这个格子找到，那么就从这个网格的周围上下左右8个网格里面寻找存在骑手的网格。然后从里面取出骑手位置，和订单位置做比对。找出最近的。")]),_._v(" "),t("p",[_._v("后面的开放题，我就不写这么详细了，只说简单思路：\n"),t("strong",[_._v("6、假如我有一个任务，可以允许多个线程同时执行，但是一旦有一个线程执行完成后，其他的线程就立马终止这个任务，并且后续的线程都无法执行这个任务，这个功能应该怎么来写？")])]),_._v(" "),t("p",[_._v("思路：设置一个volatile标记位变量，任务执行完毕之后使用interrupt打断，并判断标记位，决定是否需要继续执行，volatile底层的原理老师在面试突击第三季有讲解，大家可以去了解了解。")]),_._v(" "),t("p",[t("strong",[_._v("7、让你来设计一个redis的hash结构，你会怎么来设计？让你来设计一个redis的zset结构你会怎么来设计？")])]),_._v(" "),t("p",[_._v("思路：借助Java的hashmap，双层hashmap + 泛型。\n思路：List+Node节点+比较器，设置双属性，key的内容已经key对应的score，并采取插入排序算法，做每次新数据的排序。")]),_._v(" "),t("p",[t("strong",[_._v("8、说一下你们系统的数据库的数据量，能不能告诉我，你是怎么去设计索引的，线上的mysql优化你会怎么做，分库分表的方案，以及分布式的id你会怎么去生成，如何去设计，你怎么设计这个id生成算法，才能避免跨库查询数据的这种情况？")])]),_._v(" "),t("p",[_._v("分库分表思路：一步到位分库法。2台物理机，8个逻辑库，总计16个逻辑库，每个库16张表。后续需要迁移的时候，只需要添加物理机，迁移逻辑库，修改程序配置即可。")]),_._v(" "),t("p",[_._v("分布式id思路：redis incr+基因分库法。用redis incr生产id，然后在服务中，加入一些根据查询请求的影响因子，把可能出现的跨库查询的数据，尽量用这些影响因子放到同一个库，避免跨库查询。")]),_._v(" "),t("p",[_._v("上面的一系列开放性问题，都是我在面试过程中遇到的真实的问题，说实话，没有标准答案，需要的就是日常要有足够的思考，足够的输出，在遇到这些场景题目的时候，我们能够把学到的知识按照这些场景运用起来，说出一个起码简单可用的方案或者思路来。")]),_._v(" "),t("p",[_._v("当这些问题你回答的得心应手的时候，其他的所谓原理，你对技术的理解绝对已经达到了一定的层次，而不是简简单单的，我学了什么技术，背会了xx八股文。")]),_._v(" "),t("p",[_._v("我个人认为，没有八股文，哪怕是jdk、jvm、mysql的基础知识，里面的设计思路，优化思路也都是无处不在，可借鉴的地方数不胜数！")]),_._v(" "),t("h2",{attrs:{id:"_7、-面试技巧"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7、-面试技巧"}},[_._v("#")]),_._v(" 7、 面试技巧")]),_._v(" "),t("p",[_._v("还是我一直强调的东西，输出！")]),_._v(" "),t("h3",{attrs:{id:"_1、广度输出"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、广度输出"}},[_._v("#")]),_._v(" 1、广度输出")]),_._v(" "),t("p",[_._v("在面试之前，"),t("strong",[_._v("按照自己准备好的知识面")]),_._v("，比如并发，锁，mysql，jvm，项目亮点，做一套完备的输出，")]),_._v(" "),t("p",[_._v("输出过程我个人的方式是")]),_._v(" "),t("p",[t("strong",[_._v("给自己设置问答，一问一答，尽可能的多问自己问题，写下来，然后自己回答")])]),_._v(" "),t("p",[_._v("其实更好的方式是，")]),_._v(" "),t("p",[t("strong",[_._v("给志同道合的小伙伴讲解")]),_._v("，但是考虑到大家都比较忙，这个条件儿比较苛刻，所以，可以自己拔两根毫毛，变两只猿打打架")]),_._v(" "),t("p",[_._v("这个过程主要是要广度，也就是说，所有的知识点儿，你只要是写在简历上了，就一定要别人问到的时候，立马有所反应，就像肌肉记忆一样。")]),_._v(" "),t("h3",{attrs:{id:"_2、深度输出"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、深度输出"}},[_._v("#")]),_._v(" 2、深度输出")]),_._v(" "),t("p",[_._v("着重找几个重点的技术点，做深入的提问。比如mq，你的场景，这个场景为什么要用mq，mq的广播，集群有啥区别，mq的底层存储结构是什么样的，集群/广播的业务区别和底层原理实现到底怎么实现的，事务消息机制怎么实现的，如果让你实现事务消息机制，你会怎么做，事务消息会不会失败等等……")]),_._v(" "),t("p",[_._v("这个过程就是越深入越好，最好深入到专栏，架构都没讲到的地步。但是这个过程因为太过于深入，所以，不适合大面积来做，找准其中几个，比如mysql + mq，jvm + 锁，redis + redis锁 + 数据结构实现原理等等。")]),_._v(" "),t("h3",{attrs:{id:"_3、项目输出"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、项目输出"}},[_._v("#")]),_._v(" 3、项目输出")]),_._v(" "),t("p",[_._v("我和大家一样，在项目上是没有任何优势的。但是大家也都明白，不是所有的项目都有高并发，高负载。那么我们怎么运用学到的技术，把我们的项目包装起来？")]),_._v(" "),t("h4",{attrs:{id:"第一点-不要怂"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一点-不要怂"}},[_._v("#")]),_._v(" "),t("strong",[_._v("第一点：不要怂")])]),_._v(" "),t("p",[_._v("你的项目就是有上百万用户，上百万日活，高峰期qps就是有好几千，为啥？因为面试官也不知道你到底有没有！只要你技术学的扎实，"),t("strong",[_._v("对业务，项目，技术有深入的思考，对各种问题想好各种解决方案")]),_._v("，那你的项目就是高并发，高负载。因为你的解决方案，只要翻译成代码，部署架构，一定能有承载高并发，高流量，高负载的能力。")]),_._v(" "),t("h4",{attrs:{id:"第二点-深度思考业务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二点-深度思考业务"}},[_._v("#")]),_._v(" "),t("strong",[_._v("第二点：深度思考业务")])]),_._v(" "),t("p",[_._v("比如，我面试的时候是这么说我的项目的，根据不同地市的特点，提炼出用户模型，业务模型，再根据这些不同的用户模型，业务模型拆分了微服务，并且做排列组合适配了各地市的交易业务，为公司带来了2000w/年的合同额。")]),_._v(" "),t("p",[_._v("附上我的图：\n"),t("a",{attrs:{href:"https://www.processon.com/view/link/60c167abe0b34d0950ab89d9",target:"_blank",rel:"noopener noreferrer"}},[_._v("https://www.processon.com/view/link/60c167abe0b34d0950ab89d9"),t("OutboundLink")],1),_._v("\n只要你把"),t("strong",[_._v("业务模型提取")]),_._v("出来，再加上一些思考，结合技术，很容易就知道，怎么去拆分微服务，微服务间又是怎么做排列组合，基于排列组合，又是怎么做的服务间的交互？")]),_._v(" "),t("h4",{attrs:{id:"第三点-找准某个业务-定制你的技术栈"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三点-找准某个业务-定制你的技术栈"}},[_._v("#")]),_._v(" "),t("strong",[_._v("第三点：找准某个业务，定制你的技术栈")])]),_._v(" "),t("p",[_._v("比如，我就找准了一个零售+虚拟电厂的业务模型。零售套餐数据，电力的曲线数据，虚拟电厂的调频调峰的实时指令发送。")]),_._v(" "),t("p",[_._v("首先零售套餐特别适合缓存架构，因为套餐数据多数是查询的请求，并且套餐数据变动情况不大，而曲线数据也都是相对固定的数据，很容易就可以套用"),t("strong",[_._v("nginx静态缓存 + redis缓存 + ehcache本地缓存")]),_._v("这一套架构。")]),_._v(" "),t("p",[_._v("只要考虑好细节，比如怎么监控，怎么同步，存什么数据，失效策略等等。这个最好不要直接套用模板，要用一些自己的思路说一些业务特点，你是怎么处理这种业务特点带来的问题的。")]),_._v(" "),t("p",[_._v("例如零售这里，我设计了一个点，我们每天的套餐签订结果第二天会又很多热点套餐被查询，所以我用了一个sortedset存储当天被访问的热点套餐排名，只取前1000的热点数据。原因是，我们经过大量的实际数据分析，发现前1000的套餐，基本上是被95%的用户签订的。并且第二天会有大量的用户去查看套餐，查看套餐签订结果。")]),_._v(" "),t("p",[_._v("其次是结算业务和调度计划业务，因为这两个和零售不是强相关的，但是却需要我这边儿的数据去做结算单，去做调度指令计划，那么我提供接口给他调数据肯定是不合适的，所以引入了MQ，具体怎么发的，什么时间发的，有什么保障机制等等都想的很详细。")]),_._v(" "),t("p",[_._v("并且，交易的时候有一个结算侧风险额度和调度侧的负荷额度需要锁定，这个场景用了分布式事务去保证，但是因为也不是强相关，走的是最终一致性。")]),_._v(" "),t("p",[_._v("下发调度指令是一个实时性要求比较高的操作，所以没有使用mq，而是直接走redis+mysql双写的方式发送的指令。")]),_._v(" "),t("p",[_._v("基本上上面这一套组合拳，就能把技术面试全部刚过去了。"),t("strong",[_._v("技术广度+技术深度+项目")]),_._v("。")]),_._v(" "),t("p",[_._v("另外说一下，在面试的时候，有时候难免会遇到"),t("strong",[_._v("无法理解面试官问题")]),_._v("的情况，这个时候千万不要自己瞎猜，否则会消耗很多面试官的耐心，也会降低评价，")]),_._v(" "),t("p",[t("strong",[_._v("面试是一个沟通的过程，一定要学会提问，不懂的时候，就说，请教一下问题是什么意思。")])]),_._v(" "),t("p",[_._v("比如，"),t("strong",[_._v("请问一下，您这个问题是想问哪个角度？")])]),_._v(" "),t("p",[_._v("我这里可以从xxx、xxx、xxx角度来回答。如果没有命中面试官的方向，他一般会再多说一句，应该往哪个方向，如果命中了，他可能会说，那你都说一下吧")]),_._v(" "),t("p",[_._v("一旦进入到让你都说一下这个程度，就进入了你的节奏了，因为你说出来的几个角度，一定是自己特别擅长的几个方向。。。当然如果有傻猴子，非要说几个自己短板的角度，那当我没说…………")]),_._v(" "),t("h3",{attrs:{id:"_4、培养自信"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、培养自信"}},[_._v("#")]),_._v(" 4、培养自信")]),_._v(" "),t("p",[_._v("面试的时候，有些面试官水平不好，或者说聊不到一个点儿上去，千万不要失去信心。因为只是技术没有匹配而已，或者互相没有get到点而已。比如我遇到的一个问题：")]),_._v(" "),t("p",[_._v("你做的东西有哪些亮点和case?我说了以后面试官完全不感冒，我一度怀疑自己，于是我找了老师问了问，结果老师说，别怪自己，有些不靠谱的面试官，可能是真不行。")]),_._v(" "),t("p",[t("img",{attrs:{src:"interview_share_1/image-20210623161703605.png",alt:"image-20210623161703605"}})]),_._v(" "),t("p",[_._v("所以，一定要自信，坚定自己所学，金箍棒也有被有眼无珠的人说是废铁的时候呢！")]),_._v(" "),t("h2",{attrs:{id:"_8、面试投递选择"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8、面试投递选择"}},[_._v("#")]),_._v(" 8、面试投递选择")]),_._v(" "),t("p",[_._v("第一周，我约了前半周面，北京银行，还有几家小公司，同时内推约了周四去哪儿网的第一面。")]),_._v(" "),t("p",[_._v("因为像去哪儿网这种大公司，一般都是3轮技术面，所以前半周练手，周四周五面第一面比较合适，一般过了以后，很快就会有反馈，约第二面")]),_._v(" "),t("p",[_._v("这个时候可以约个第二周的周一、周二，周末留出一点时间，自己总结总结，复习复习知识儿。基本上二面过了，周三周四周五就能完成后面的面试。这样的话，流程会快一点儿，而自己的准备时间也会更加充分。把握好节奏，3周能面很多个小公司+大公司。")]),_._v(" "),t("h2",{attrs:{id:"_9、-面试总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9、-面试总结"}},[_._v("#")]),_._v(" 9、 面试总结")]),_._v(" "),t("p",[_._v("特别喜欢之前有个师兄说的话：")]),_._v(" "),t("p",[t("strong",[_._v("流水不争先，争的是滔滔不绝。没有一口吃成的胖子，也没有一天练成的斗战胜佛。在学习这条路上，积累、总结、锤炼、输出是必不可少的过程。没有人能不经历八十一难就修的正果。")])]),_._v(" "),t("p",[_._v("老师已经把仙丹，蟠桃，定海神针给我们准备好了，我们要做的就是，该吃吃，该舞舞。只要还有精力，就接着奏乐，接着舞。")]),_._v(" "),t("p",[_._v("最后牢记一点："),t("strong",[_._v("输出，输出，输出！")])])])}),[],!1,null,null,null);v.default=s.exports}}]);